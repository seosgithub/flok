ctable = {
  <% @controllers.each do |c| %>
      <%= c.name %>: {
        __init__: function(__base__) {
          <% c._services.each do |s| %>
              <%= s %>_on_connect(__base__);
          <% end %>
        },
        __dealloc__: function(__base__) {
          <% c._services.each do |s| %>
              <%= s %>_on_disconnect(__base__);
          <% end %>
        },
        name: '<%= c.name %>',
        root_view: '<%= c.name %>',
        spots: <%= c.spots.to_json %>,
        actions: {
          <% actions_for_controller(c.name).each do |a| %>
              <%= a.name %>: {
                on_entry: function(__base__) {
                  //Controller information, includes action, etc. (controller_info)
                  var __info__ = tel_deref(__base__);

                  //The 'context' which is user-defined
                  var context = __info__.context;
                  <%= a.on_entry_src.strip %>
                },
                handlers: {
                  <% a.ons.each do |e| %>
                    <%= e[:name] %>: function(__base__, params) {
                      var __info__ = tel_deref(__base__);
                      var context = __info__.context;

                      <%= e[:src] %>
                    },
                  <% end %>
                }
              },
          <% end %>
        },
      },
  <% end %>
}
