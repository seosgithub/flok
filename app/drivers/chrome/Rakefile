require 'fileutils'

#Compile all the *.js files into one file
task :build do
  raise "No BUILD_PATH given" unless BUILD_PATH=ENV["BUILD_PATH"]

  out = "/* THIS IS AN AUTOGENETARED FILE, DO NOT EDIT THIS */\n"
  Dir["./vendor/*.js"].each do |js|
    code = File.read(js)
    out << code
    out << "\n"
  end

  Dir["*.js"].each do |js|
    code = File.read(js)
    out << code
    out << "\n"
  end

  File.write File.join(BUILD_PATH, "chrome.js"), out
end
