#Project
Flok is divided up like rails.  There is the flok kernel and driver stack and then there is user-facing applications.

###The flok command
You create and build projects via the `flok` command.

 * `flok new <path>` - Create a new flok project
 * `flok build <platform>` - Build a flok project. Generates files in `./products`
 * `flok server <platform>` - Trigger auto-rebuild when a file is modified in the `./app` folder and hosts the `products` folder on `http://localhost:9992/`

###Folder structure
  * `app/`
    * `controllers/` - All your controllers live here as `rb` files.
  * `products/` - Autogenerated when you build
    * `$PLATFORM/` - A folder named after the platform you selected
      * `application_user.js` - The source for the flok application_user. Includes your application code statically linked
      * `drivers/` - Contains the driver code needed to implement the driver side interface

###application_user.js
`application_user.js` is equivalent to the application_user build `application.js` except that it contains the users controllers statically linked (appended in *js*).

###User build process
  1. The gem is build via `build:world` using the platform given in build.
  2. All files generated by the gem kernel and associated driver for the platform are placed in the project ./products/$PLATFORM
  3. The controllers in `./app/controllers/*.rb` are run through the `user_compiler` in `./lib/flok/user_compiler.rb` and then saved to the projects `./products/$PLATFORM/glob/user_compiler.js`
  4. `./products/$PLATFORM/application.js` is moved to `./products/$PLATFORM/glob/application.js`
  5. The local project `./products/$PLATFORM/glob/application.js` and `./products/$PLATFORM/glob/user_compiler.js` are merged into `./products/$PLATFORM/glob/application_user.js.erb`.
  6. The `erb` files is then sent to `./products/$PLATFORM/glob/application_user.js` with the below `ERB` variables allowable.

####Supported variables
  * `@debug` - Set to `true` when FLOK_ENV=DEBUG
  * `@release` - Set to `true` when FLOK_ENV=RELEASE

```js
  //Example JS code for debug / release mode
  <% if @debug %>
    //JS Code for debug
  <% else %>
    //JS code for not debug mode
  <% end %>
```
